var x=Object.defineProperty;var f=(s,e,t)=>e in s?x(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>(f(s,typeof e!="symbol"?e+"":e,t),t);import"../../../modulepreload-polyfill-3cfb730f.js";/* empty css                     */import{c as M}from"../../../index-8d178fc0.js";import{G as w}from"../../../lil-gui.esm-da8e181f.js";import{l as z}from"../../../loop-9a51de3b.js";const y=(1+Math.sqrt(5))/2,u=window.innerWidth,g=window.innerHeight,{ctx:i}=M(u,g);let D=Math.PI*2*(2-y);class A{constructor(e={}){a(this,"count",100);a(this,"maxRadius",300);a(this,"minRadius",100);a(this,"minSize",1);a(this,"maxSize",10);a(this,"pixelsPerSecond",1e3);a(this,"stepAngle");a(this,"timingMode","pixelsPerSecond");a(this,"currentStepProgress",0);a(this,"stepsPerSecond",8);a(this,"currentPixels",0);a(this,"currentStep",0);a(this,"drawDots",!1);a(this,"dots",e=>{i.fillStyle="#fff",e.forEach(({x:t,y:n},h)=>{i.beginPath();let r=this.minSize+(this.maxSize-this.minSize)*(h/this.count);i.arc(t,n,r,0,Math.PI*2),i.fill()})});Object.assign(this,e)}getStep(e){let t=e/this.count,n=this.minRadius+(this.maxRadius-this.minRadius)*t,h=e*(typeof this.stepAngle=="number"?this.stepAngle:D),r=Math.cos(h)*n,l=Math.sin(h)*n;return{x:r,y:l}}getPartialStep(e,t){let n=this.getStep(e-1),h=this.getStep(e),r=n.x+(h.x-n.x)*t,l=n.y+(h.y-n.y)*t;return{x:r,y:l}}updatePxPerSecond(e){this.currentPixels+=this.pixelsPerSecond*(e/1e3);let t=0,n=0,h=0,r=[],l=0;for(;h<this.currentPixels&&l<this.count;){let{x:o,y:d}=this.getStep(l),p=Math.sqrt((o-t)**2+(d-n)**2);if(p+h>=this.currentPixels){let S=(this.currentPixels-h)/p;r.push(this.getPartialStep(l,S)),h=this.currentPixels}else h+=p,r.push({x:o,y:d});t=o,n=d,l++}this.drawDots?this.dots(r):(i.beginPath(),r.forEach(({x:o,y:d},p)=>{p===0?i.moveTo(o,d):i.lineTo(o,d)}),i.stroke()),l===this.count&&(this.currentPixels=0)}updateSteps(e){let t=[];this.currentStepProgress+=this.stepsPerSecond*(e/1e3),this.currentStepProgress>=1&&(this.currentStepProgress=0,this.currentStep++,this.currentStep>=this.count&&(this.currentStep=0));let n=0;for(;n<this.currentStep&&n<this.count;){let{x:h,y:r}=this.getStep(n);t.push({x:h,y:r}),n++}t.push(this.getPartialStep(this.currentStep,this.currentStepProgress)),this.drawDots?this.dots(t):(i.beginPath(),t.forEach(({x:h,y:r},l)=>{l===0?i.moveTo(h,r):i.lineTo(h,r)}),i.stroke())}drawStatic(){let e=0;if(this.drawDots)for(i.fillStyle="#fff";e<this.count;){let{x:t,y:n}=this.getStep(e),h=this.minSize+(this.maxSize-this.minSize)*(e/this.count);i.beginPath(),i.arc(t,n,h,0,Math.PI*2),i.fill(),e++}else{for(i.beginPath();e<this.count;){let{x:t,y:n}=this.getStep(e);i.lineTo(t,n),e++}i.stroke()}}update(e){this.timingMode==="pixelsPerSecond"?this.updatePxPerSecond(e):this.timingMode==="stepsPerSecond"?this.updateSteps(e):this.drawStatic()}}let m=new A;const R=(s,e)=>{function t(c){c==="stepsPerSecond"?(l.show(),o.hide()):c==="pixelsPerSecond"?(l.hide(),o.show()):(l.hide(),o.hide())}function n(c){c?(h.show(),r.show()):(h.hide(),r.hide())}e.add(s,"count",1,800,1),e.add(s,"maxRadius",10,1e3,1),e.add(s,"minRadius",0,500,1);let h=e.add(s,"minSize",0,20,1),r=e.add(s,"maxSize",1,30,1);e.add(s,"drawDots").onChange(n);let l=e.add(s,"stepsPerSecond",1,100,1),o=e.add(s,"pixelsPerSecond",1,2e3,1);e.add(s,"timingMode",["pixelsPerSecond","stepsPerSecond","static"]).onChange(t),t(s.timingMode),n(s.drawDots);let d={usePhi:!0,stepAngleDegrees:360/7},p=e.add(d,"usePhi"),S=e.add(d,"stepAngleDegrees",0,360,.1).hide().onChange(c=>{s.stepAngle=c*Math.PI/180});p.onChange(c=>{c?(S.hide(),s.stepAngle=void 0):(S.show(),s.stepAngle=d.stepAngleDegrees*Math.PI/180)})};R(m,new w);let P=0;z(s=>{let e=s-P;P=s,i.clearRect(0,0,u,g),i.save(),i.translate(u/2,g/2),i.strokeStyle="#fff",i.fillStyle="#fff",m.update(e),i.restore()});
