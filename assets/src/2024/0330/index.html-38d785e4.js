var T=Object.defineProperty;var b=(h,e,t)=>e in h?T(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t;var i=(h,e,t)=>(b(h,typeof e!="symbol"?e+"":e,t),t);import"../../../modulepreload-polyfill-3cfb730f.js";/* empty css                     */import{c as v}from"../../../index-8d178fc0.js";import{l as w}from"../../../loop-9a51de3b.js";import{s as x,r as y}from"../../../utils-410b772c.js";class Q{constructor({iterations:e=3,minSize:t=20,size:a,palette:n,speedAdd:r,method:s}){i(this,"iterations");i(this,"minSize");i(this,"root");i(this,"size");i(this,"tileChanceMin",.7);i(this,"palette");i(this,"padding",5);i(this,"lastTime",null);i(this,"lastAdd",null);i(this,"currentLevel",1);i(this,"speedAdd",10);i(this,"animating",[]);i(this,"stackQueue",[]);i(this,"method","stack");i(this,"tileDuration");i(this,"makeTiles",({iterations:e,currentLevel:t=1,tileChance:a=1,tile:n=this.root})=>{if(e===0)return;n.inner=[];let{x:r,y:s,size:d}=n,o=2,l=(d-this.padding)/o;if(l<this.minSize)return;let A=0;for(let c=0;c<o;c++)for(let u=0;u<o;u++){let g={x:r+this.padding+u*l,y:s+this.padding+c*l,size:l-this.padding,progress:0,color:this.palette[t%this.palette.length],level:t,inner:[],parent:n,index:A++};Math.random()<a&&(n.inner.push(g),this.makeTiles({iterations:e-1,currentLevel:t+1,tile:g,tileChance:Math.max(a-.1,this.tileChanceMin)}))}});i(this,"resetAnimation",()=>{this.lastTime=null,this.lastAdd=null,this.stackQueue=[this.root]});i(this,"drawTile",(e,t)=>{let a=t.size,n=t.x+t.size/2,r=t.y+t.size/2;a*=Math.min(t.progress,1);let s=n-a/2,d=r-a/2;e.fillStyle=t.color,e.beginPath(),e.rect(s,d,a,a),e.fill()});i(this,"draw",(e,t)=>{this.lastTime||(this.lastTime=t),this.lastAdd||(this.lastAdd=t);let a=t-this.lastTime,n=t-this.lastAdd;if(this.lastTime=t,n>1e3/this.speedAdd){this.lastAdd=t;let s=this.method==="stack-rev"||this.method==="queue"?this.stackQueue.shift():this.stackQueue.pop();s&&(s.level!==this.currentLevel&&(this.currentLevel=s.level),this.animating.push(s))}let r=[];return this.animating.forEach(s=>{s.progress+=a/this.tileDuration,this.drawTile(e,s),s.progress>=1?(s.progress=0,this.method.endsWith("rev")?this.stackQueue.unshift(...s.inner):this.stackQueue.push(...s.inner)):r.push(s)}),this.animating=r,!this.stackQueue.length&&!this.animating.length?(this.resetAnimation(),!0):!1});this.iterations=e,this.minSize=t,this.size=a,this.palette=n,this.speedAdd=r||this.speedAdd,this.tileDuration=500,this.method=s||this.method,this.root={x:0,y:0,size:this.size,progress:0,color:n[0],level:0,inner:[],parent:null,index:0},this.makeTiles({iterations:this.iterations,currentLevel:1,tile:this.root}),this.stackQueue.push(this.root)}}const p=window.innerWidth,m=window.innerHeight,{ctx:z}=v(p,m);let k,M=[["#dc5132","#a46589","#7a82b8","#8ad0a6","#c4f0a8","#a0bb07","#ffcf33","#ec9f05"],["#533a71","#454a96","#6184d8","#50c5b7","#9cec5b","#f0f465","#ff4a1c","#ed254e"],["#874286","#856596","#f9c8ce","#a8d7a8","#b6cccc","#8aadbc","#7a7eb8","#fc814a"],["#87425d","#3c2e6b","#0081af","#a7d6c3","#285943","#8a8fbd","#9a79b8","#fcee49"]],f=Math.min(p,m)*.9,S=new Q({iterations:4,speedAdd:20,minSize:5,size:f,method:"stack",palette:x(y(M))});z.translate((p-f)/2,(m-f)/2);const C=h=>{S.draw(z,h)&&k.stop()};k=w(C);
