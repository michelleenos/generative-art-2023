var u=Object.defineProperty;var V=(a,e,t)=>e in a?u(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var s=(a,e,t)=>(V(a,typeof e!="symbol"?e+"":e,t),t);import"../../../../modulepreload-polyfill-3cfb730f.js";import{a as b,G as w}from"../../../../lil-gui.esm-da8e181f.js";import{l as S}from"../../../../loop-9a51de3b.js";import{R as E}from"../../../../trig-shapes-61ac4bbe.js";/* empty css                        */import{c as y}from"../../../../index-8d178fc0.js";import{e as m}from"../../../../easings-ac43f515.js";import{S as C}from"../../../../sizes-34512445.js";import{r as O,s as x}from"../../../../utils-410b772c.js";import{T as $,c as v,a as R,e as T,b as F,d as z}from"../../../../tree-animation-pattern-b81ca64a.js";import"../../../../p5.min-89a01bf6.js";import"../../../../_commonjsHelpers-725317a4.js";import"../../../../_commonjs-dynamic-modules-302442b1.js";import"../../../../shapes-52b2702a.js";import"../../../../tree-animation-7ab59557.js";import"../../../../simplex-noise-c4e77999.js";import"../../../../node-40679d3e.js";class g{constructor(e,t){s(this,"gui");s(this,"storedVals",{});s(this,"storageKey");s(this,"children",[]);s(this,"defaultVals",{});s(this,"setExpandCollapse",()=>{this.storedVals.expanded?this.gui.open():this.gui.close(),this.gui.onOpenClose(()=>{console.log("openclose"),this.storedVals.expanded=!this.gui._closed,this.setStorage()})});s(this,"add",(e,t,i=[],o=t,l=!0)=>{l&&this.storedVals.hasOwnProperty(o)?(this.defaultVals[t]=e[t],e[t]=this.storedVals[o]):(this.storedVals[o]=e[t],this.setStorage());let d=this.gui.add(e,t,...i).name(o);return d.domElement.setAttribute("data-ls-key",o),d});s(this,"addFolder",e=>{let t=this.gui.addFolder(e),i=new g(`${this.storageKey}-${e}`,t);return this.children.push(i),i});s(this,"setStorage",()=>{localStorage.setItem(this.storageKey,JSON.stringify(this.storedVals))});s(this,"resetVals",()=>{this.storedVals={},this.setStorage(),this.children.forEach(e=>e.resetVals()),this.gui.controllersRecursive().forEach(e=>{this.defaultVals.hasOwnProperty(e.property)&&e.parent===this.gui&&e.domElement.getAttribute("data-ls-key")&&e.setValue(this.defaultVals[e.property])})});s(this,"exportVals",()=>{let e=new Date,t=`${e.getMonth()+1}${e.getDate()}${e.getHours()}${e.getMinutes()}`,i=this.gui.save(),o=JSON.stringify(i,null,2),l=new Blob([o],{type:"application/json"}),d=URL.createObjectURL(l),f=document.createElement("a");f.href=d,f.download=`${this.storageKey}-${t}.json`,f.click()});this.gui=t||new b,this.storageKey=e,this.storedVals=localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):{},this.gui.onChange(i=>{if(i.controller.parent===this.gui){let l=i.controller.domElement.getAttribute("data-ls-key");l&&(this.storedVals[l]=i.value,this.setStorage())}}),this.setExpandCollapse()}}const D={circleOutlines:v,circle:R,eqTriangle:T,boxesHorizontal:F,boxesVertical:z},r=new C;let{ctx:n,resizeCanvas:G}=y(r.width,r.height);r.on("resize",G);let I=[["#081232","#bba0ca","#fff8e8","#fcd581","#d52941","#990d35"],["#fefaec","#f398c3","#cf3895","#a0d28d","#06b4b0","#fed000","#FF8552"],["#002e2d","#06b4b0","#cf3895","#fff8e8","#f398c3","#a0d28d","#ffd930","#FF8552"],["#331c25","#3c2e6b","#0081af","#a7d6c3","#285943","#8a8fbd","#9a79b8","#fcee49"]],h=Math.min(r.width,r.height)*.9,c=[...O(I)],L=c.shift();c=x(c);let p=new $({bounds:new E((r.width-h)/2,(r.height-h)/2,h,h),palette:c,patterns:D});p.initTree();const P=a=>{let e=new w().close(),t=new g("tree",e);return t.add(a,"nodeDuration",[100,2e3,1]),t.add(a,"maxDepth",[1,20,1]),t.add(a,"minDepth",[1,20,1]),t.add(a,"divideRule",[["half","random","thirds-row","two-thirds","quarters-grid","quarters-random"]]).onChange(a.initTree),t.add(a,"minLifeSpan",[100,1e4,10]),t.add(a,"noiseVarColor",[[1,2]]),t.add(a,"noiseVarPattern",[[1,2]]),t.add(a,"noiseVarChange",[[1,2]]),t.add(a,"thresholdChange",[0,1,.01]),t.add(a,"nodeEaseEnter",[Object.keys(m)]),t.add(a,"nodeEaseLeave",[Object.keys(m)]),e.add(a,"initTree").name("re init tree"),e.add(t,"resetVals"),e};P(p);function U(a){n.clearRect(0,0,r.width,r.height),n.fillStyle=L,n.fillRect(0,0,r.width,r.height),p.tick(a,n)}S(U);
