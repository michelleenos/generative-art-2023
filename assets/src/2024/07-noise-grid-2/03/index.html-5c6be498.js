var k=Object.defineProperty;var w=(r,o,e)=>o in r?k(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e;var s=(r,o,e)=>(w(r,typeof o!="symbol"?o+"":o,e),e);import"../../../../modulepreload-polyfill-3cfb730f.js";import{l as x}from"../../../../loop-9a51de3b.js";import{R as P}from"../../../../trig-shapes-61ac4bbe.js";/* empty css                        */import{c as _}from"../../../../index-8d178fc0.js";import{S as O}from"../../../../sizes-34512445.js";import{r as g,s as C}from"../../../../utils-410b772c.js";import{c as R}from"../../../../index-168b6c61.js";import{a as y}from"../../../../lil-gui.esm-da8e181f.js";import{s as D}from"../../../../sort-colors-8885660c.js";import{T as M}from"../../../../tree-animation-7ab59557.js";import{D as L}from"../../../../data-view-d08f0f9a.js";import"../../../../p5.min-89a01bf6.js";import"../../../../_commonjsHelpers-725317a4.js";import"../../../../_commonjs-dynamic-modules-302442b1.js";import"../../../../simplex-noise-c4e77999.js";import"../../../../easings-ac43f515.js";import"../../../../node-40679d3e.js";import"../../../../dom-07b9d998.js";class T extends M{constructor(e){super(e);s(this,"lastPerfUpdate",0);s(this,"tickCalculationsAvg",0);s(this,"tickCalculationsCount",0);s(this,"tickCalculationsCounts",[]);s(this,"leavesCounts",[]);s(this,"leavesCountsAvg",0);s(this,"tick",(e,a)=>{this.leavesCounts.push(this.leaves.length),this.tickCalculationsCount=0,super.tick(e,a),this.updatePerfVals(e)});s(this,"updatePerfVals",e=>{this.tickCalculationsCounts.push(this.tickCalculationsCount),!(e-this.lastPerfUpdate<500)&&(this.tickCalculationsAvg=this.tickCalculationsCounts.reduce((a,l)=>a+l,0)/this.tickCalculationsCounts.length,this.leavesCountsAvg=this.leavesCounts.reduce((a,l)=>a+l,0)/this.leavesCounts.length,this.leavesCounts=[],this.tickCalculationsCounts=[],this.lastPerfUpdate=e)})}calculateNoise(e,a,l){return this.tickCalculationsCount++,super.calculateNoise(e,a,l)}}const n=new O;let{ctx:h,resizeCanvas:A}=_(n.width,n.height);n.on("resize",A);let c=Math.min(n.width,n.height)*.9,u=[["#081232","#bba0ca","#fff8e8","#fcd581","#d52941","#990d35"],["#fefaec","#f398c3","#cf3895","#a0d28d","#06b4b0","#fed000","#FF8552"],["#002e2d","#06b4b0","#cf3895","#fff8e8","#f398c3","#a0d28d","#ffd930","#FF8552"],["#331c25","#3c2e6b","#0081af","#a7d6c3","#285943","#8a8fbd","#9a79b8","#fcee49"]];const V=r=>{let o=[...u[r]];return o=C(o),{bg:o.shift(),palette:[...o]}};let p={getPalette:V,paletteIndex:Math.floor(g(u.length))},{bg:b,palette:v}=p.getPalette(p.paletteIndex);class I extends T{constructor(e){super(e);s(this,"colorMix","rgb");s(this,"colorRandomness",.2);s(this,"noiseOpts2",{key:"colors",speed:.1,freq:1});s(this,"_palette");s(this,"_colorSort");s(this,"sortPalette",()=>{this._colorSort==="random"?this._palette=C(this._palette):this._palette=D(this._palette,this._colorSort)});s(this,"getLeafColor",e=>{let l=this.getNoise(e,this.noiseOpts2)*.5+.5,d=this.getLeafData(e);l+=d.randomVal,l*=this.palette.length;let m=Math.floor(l)%this.palette.length,q=(m+1)%this.palette.length,S=l%1;return R.mix(this.palette[m],this.palette[q],S,this.colorMix).hex()});s(this,"getLeafData",e=>(e.data||(e.data={randomVal:g(this.colorRandomness)}),e.data));s(this,"draw",e=>{e.save(),this.leaves.forEach(a=>{let l=a.progress,d=this.getLeafData(a);d.color=this.getLeafColor(a),e.save(),e.translate(a.bounds.x+a.bounds.width/2,a.bounds.y+a.bounds.height/2),e.fillStyle=d.color,e.beginPath(),e.arc(0,0,a.bounds.width*.5*l,0,Math.PI*2),e.fill(),e.restore()})});this._palette=v,this._colorSort=e.colorSort||"random",this.colorRandomness=e.colorRandomness||.2,this.colorMix=e.colorMix||"rgb"}get colorSort(){return this._colorSort}set colorSort(e){this._colorSort=e,this.sortPalette()}set palette(e){this._palette=e,this.sortPalette()}get palette(){return this._palette}}let t=new I({palette:v,bounds:new P((n.width-c)/2,(n.height-c)/2,c,c),maxDepth:5,minDepth:3,thresholdChange:.8,noiseOptions:{speed:.1,freq:1},minLifeSpan:600,nodeDuration:400,nodeEaseEnter:"inQuad",nodeEaseLeave:"inQuad",divideRule:"quarters-grid",colorSort:"hue",colorRandomness:.31,colorMix:"rgb"});const i=new y;i.add(t,"maxDepth",1,8,1);i.add(t,"minDepth",1,8,1);i.add(t,"thresholdChange",0,1,.01);typeof t.noiseOptions.freq=="object"?(i.add(t.noiseOptions.freq,"x",0,5,.01).name("noise freq x"),i.add(t.noiseOptions.freq,"y",0,5,.01).name("noise freq y")):i.add(t.noiseOptions,"freq",0,5,.01).name("noise freq");i.add(t.noiseOptions,"speed",0,2,.01).name("noise speed");typeof t.noiseOpts2.freq=="object"?(i.add(t.noiseOpts2.freq,"x",0,5,.01).name("noise2 freq x"),i.add(t.noiseOpts2.freq,"y",0,5,.01).name("noise2 freq y")):i.add(t.noiseOpts2,"freq",0,5,.001).name("noise2 freq");i.add(t.noiseOpts2,"speed",0,2,.001).name("noise2 speed");i.add(t,"colorSort",["hue","luminance","saturation","temperature","lightness","lightness-saturation","random"]);i.add(t,"colorRandomness",0,1,.01);i.add(t,"colorMix",["rgb","lab","hsv","hsl","hsi"]);i.add(p,"paletteIndex",u.map((r,o)=>o)).onChange(r=>{let{bg:o,palette:e}=p.getPalette(r);t.palette=e,b=o});i.add(t,"initTree");let f=new L().createSection("Tree");f.add(t,"tickCalculationsAvg",1);f.add(t,"leavesCountsAvg",1);t.initTree();function z(r){h.clearRect(0,0,n.width,n.height),h.fillStyle=b,h.fillRect(0,0,n.width,n.height),t.tick(r,h),f.update()}x(z);
