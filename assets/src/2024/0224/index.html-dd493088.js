import"../../../modulepreload-polyfill-3cfb730f.js";/* empty css                     */import{p as R}from"../../../p5.min-89a01bf6.js";import{c as v}from"../../../utils-410b772c.js";import{t as B}from"../../../tweakpane-9ece380b.js";import{R as C}from"../../../refresh-container-8d718cbf.js";import"../../../_commonjsHelpers-725317a4.js";import"../../../_commonjs-dynamic-modules-302442b1.js";let A=["#f4d35e","#f95738","#550527","#083d77","#5adbff"];A=["#083d77","#1B9AAA","#550527","#7D59AB"];const a={symmetry:"reflection",durAlpha:1.5,durSize:1,durWait:3,stepRate:15,sizeMax:.75,sizeStep:.15,count:19,walk:"weighted",showBase:!0},k=new B.Pane,E=new C(k);function I(e,h,d,u){var n;for(let m=-1;m<=1;m++)for(let l=-1;l<=1;l++){let f=(n=d[e+m])==null?void 0:n[h+l];f&&(f.weight=v(f.weight+u,1,8))}}function H(e,h,d){var m;let u=[],n=1;for(let l=-1;l<=1;l++)for(let f=-1;f<=1;f++){if(l===0&&f===0)continue;let x=(m=d[e+l])==null?void 0:m[h+f];x&&(x.weight>n&&(n=x.weight),u.push(x))}return u.filter(l=>l.weight===n)}function O(e,h,d){var n;let u=[];for(let m=-1;m<=1;m++)for(let l=-1;l<=1;l++){if(m===0&&l===0)continue;let f=(n=d[e+m])==null?void 0:n[h+l];f&&u.push(f)}return u}new R(e=>{let h,d,u,n=[],m=[],l=k.addFolder({title:"settings"});l.addInput(a,"symmetry",{options:{rotation:"rotation",reflection:"reflection"}}),l.addInput(a,"durAlpha",{min:0,max:5}),l.addInput(a,"durSize",{min:0,max:5}),l.addInput(a,"durWait",{min:0,max:5}),l.addInput(a,"stepRate",{min:1,max:60,step:1}),l.addInput(a,"walk",{options:{weighted:"weighted",random:"random"}}),l.addInput(a,"showBase");const f=()=>{a.sizeMax-a.sizeStep*3<0&&(a.sizeMax=a.sizeStep*3+.1,E.refresh())};l.addInput(a,"sizeMax",{min:0,max:5,step:.001}).on("change",f),l.addInput(a,"sizeStep",{min:0,max:2,step:.001}).on("change",f),l.addInput(a,"count",{min:5,max:50,step:1}).on("change",w);function x(){h=e.min(e.width,e.height)*.9,d=Math.floor(h/a.count);for(let o=0;o<n.length;o++)for(let t=0;t<n[o].length;t++){let s=n[o][t];s.posx=(o-a.count/2+.5)*d,s.posy=(t-a.count/2+.5)*d}}function w(){let{count:o}=a;h=e.min(e.width,e.height)*.9,d=Math.floor(h/o),u=A.map(t=>e.color(t)),e.rectMode(e.CENTER),m=[{x:Math.floor(o/2),y:Math.floor(o/2)},{x:Math.floor(o/2),y:Math.floor(o/2)}],n=[];for(let t=0;t<o;t++){let s=[];for(let r=0;r<o;r++)s.push({posx:(t-o/2+.5)*d,posy:(r-o/2+.5)*d,x:t,y:r,weightSteps:0,alpha:0,amountSize:0,mode:"none",progressWait:-1,weight:8});n.push(s)}}e.setup=function(){e.createCanvas(window.innerWidth,window.innerHeight),w()};function z(){m.forEach(o=>{let t=n[o.x][o.y];t.mode==="none"?(t.alpha=1,t.amountSize=0,t.mode="entering"):t.mode==="waiting"?t.progressWait=0:t.mode==="leaving"?(t.mode="entering",t.alpha=t.alpha,t.amountSize=1):t.mode,t.weightSteps=8,I(o.x,o.y,n,-1);let s=a.walk==="weighted"?H(o.x,o.y,n):O(o.x,o.y,n),r=e.random(s);o.x=r.x,o.y=r.y})}let y=0;e.draw=function(){let o=e.millis(),t=o-y;t>1e3/a.stepRate&&(z(),y=o),S(t),e.fill(255),e.text(e.frameRate().toFixed(2),10,10)};function S(o){let{count:t}=a;if(e.background("#e8d7ff"),e.push(),e.noStroke(),o=o*.001,e.translate(e.width/2,e.height/2),a.showBase)for(let s=0;s<t;s++)for(let r=0;r<t;r++){let i=n[s][r];e.fill(0,0,0,10),e.circle(i.posx,i.posy,d*a.sizeMax)}for(let s=0;s<t;s++)for(let r=0;r<t;r++){let i=n[s][r];i.mode==="entering"?(i.amountSize=Math.min(i.amountSize+o*(1/a.durSize),1),i.alpha<1&&(i.alpha+=o*(1/a.durAlpha)),i.amountSize>=1&&i.alpha>=1&&(i.mode="waiting",i.amountSize=1,i.alpha=1,i.progressWait=0)):i.mode==="waiting"?(i.progressWait+=o*(1/a.durWait),i.progressWait>=1&&(i.mode="leaving",i.progressWait=-1)):i.mode==="leaving"&&(i.alpha-=o*(1/a.durAlpha),i.alpha<=0&&(i.mode="none",i.amountSize=0,i.alpha=1,I(s,r,n,1)));let c=t-1-s,p=t-1-r,M=s<t/2&&r<t/2?4:s<t/2?3:r<t/2?2:1,g=d*a.sizeMax-d*a.sizeStep*(4-M),W=u[M-1];W.setAlpha(255*i.alpha),e.fill(W),e.noStroke(),a.symmetry==="reflection"?(e.circle(i.posx,i.posy,g*i.amountSize),e.circle(n[c][r].posx,n[c][r].posy,g*i.amountSize),e.circle(n[s][p].posx,n[s][p].posy,g*i.amountSize),e.circle(n[c][p].posx,n[c][p].posy,g*i.amountSize)):(e.circle(i.posx,i.posy,g*i.amountSize),e.circle(n[p][s].posx,n[p][s].posy,g*i.amountSize),e.circle(n[r][c].posx,n[r][c].posy,g*i.amountSize),e.circle(n[c][p].posx,n[c][p].posy,g*i.amountSize))}e.pop()}e.windowResized=function(){e.resizeCanvas(window.innerWidth,window.innerHeight),x()},window.drawing={step:z,show:S,pointers:m}},document.getElementById("sketch")??void 0);
