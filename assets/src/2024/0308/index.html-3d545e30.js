var M=Object.defineProperty;var I=(s,e,t)=>e in s?M(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var r=(s,e,t)=>(I(s,typeof e!="symbol"?e+"":e,t),t),P=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var l=(s,e,t)=>(P(s,e,"read from private field"),t?t.call(s):e.get(s)),k=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},S=(s,e,t,i)=>(P(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t);import"../../../modulepreload-polyfill-3cfb730f.js";import{c as T}from"../../../index-8d178fc0.js";import{l as G}from"../../../loop-9a51de3b.js";import{r as y,s as z}from"../../../utils-410b772c.js";/* empty css                     */var f,u,C;class W{constructor({steps:e,size:t=window.innerWidth,palette:i,gap:a}={}){k(this,f,30);k(this,u,void 0);k(this,C,void 0);r(this,"baseCells",[]);r(this,"palette",["#ffffff","#000000","#404040"]);r(this,"squares",[]);r(this,"growing",[]);r(this,"animateIndex",0);r(this,"addPerSecond");r(this,"addPerSecondCurrent");r(this,"lastTime",null);r(this,"lastAdd",null);r(this,"gap",3);r(this,"makeGrid",()=>{this.baseCells=[];for(let e=0;e<l(this,f);e++){let t=[];for(let i=0;i<l(this,f);i++)t.push({x:e*l(this,u),y:i*l(this,u),taken:!1});this.baseCells.push(t)}});r(this,"makeSquares",()=>{let e=0,t=3,i=6,a=10;for(this.squares=[];t>1;){let h=this.maybeFindSquare({minSize:t,maxSize:i,maxTries:100});h?(this.squares.push(h),e=0):(e++,e>=a&&(t--,i--,e=0))}let n=[];this.baseCells.forEach(h=>{h.forEach(c=>{c.taken||n.push({x:c.x,y:c.y,size:l(this,u),progress:0,color:y(this.palette)})})}),n=z(n),this.squares.push(...n)});r(this,"maybeFindSquare",({maxTries:e=100,currentTry:t=0,minSize:i=1,maxSize:a=5}={})=>{if(t>=e)return;let n=Math.floor(y(l(this,f))),h=Math.floor(y(l(this,f))),c=Math.floor(y(i,a)),o=1,E=this.baseCells[n][h];if(E.taken)return this.maybeFindSquare({maxTries:e,currentTry:t+1,minSize:i,maxSize:a});for(;o<c;){let p=!0,m=n+o,A=h+o;if(m>=l(this,f)||A>=l(this,f))break;for(let b=h;b<=A;b++)if(this.baseCells[m][b].taken){p=!1;break}for(let b=n;b<=m;b++)if(this.baseCells[b][A].taken){p=!1;break}if(p)o++;else break}if(o<i)return this.maybeFindSquare({maxTries:e,currentTry:t+1,minSize:i,maxSize:a});for(let p=n;p<n+o;p++)for(let m=h;m<h+o;m++)this.baseCells[p][m].taken=!0;return{x:E.x,y:E.y,size:o*l(this,u),progress:0,color:y(this.palette)}});r(this,"drawBase",e=>{this.baseCells.forEach(t=>{t.forEach(i=>{e.fillStyle=this.palette[0],e.strokeStyle=this.palette[1],e.beginPath(),e.rect(i.x,i.y,l(this,u),l(this,u)),e.fill(),e.stroke()})})});r(this,"drawSquares",e=>{this.squares.forEach(t=>this.drawSquare(e,t))});r(this,"drawSquare",(e,t,i=!0)=>{let a=t.size-this.gap,n=t.x+t.size/2,h=t.y+t.size/2;i&&(a*=Math.min(t.progress,1));let c=n-a/2,o=h-a/2;e.fillStyle=t.color,e.beginPath(),e.rect(c,o,a,a),e.fill()});r(this,"drawSquaresAnimate",(e,t)=>{this.lastTime||(this.lastTime=t),this.lastAdd||(this.lastAdd=t);let i=t-this.lastTime,a=t-this.lastAdd;this.lastTime=t;let n=1e3/this.addPerSecondCurrent;if(a>n){this.lastAdd=t;let h=Math.round(a/n);for(let c=0;c<h;c++){let o=this.squares[this.animateIndex];o&&(this.growing.push(o),o.increaseAddSpeed&&(this.addPerSecondCurrent*=2)),this.animateIndex++}}return this.growing.forEach(h=>{h.progress+=i/1500,this.drawSquare(e,h)}),this.growing=this.growing.filter(h=>h.progress<1),this.animateIndex>=this.squares.length&&this.growing.length===0?(this.resetAnimation(),!0):!1});r(this,"resetAnimation",()=>{this.lastTime=null,this.lastAdd=0,this.animateIndex=0,this.addPerSecondCurrent=this.addPerSecond});r(this,"resize",e=>{let t=l(this,C);S(this,C,e),S(this,u,e/l(this,f)),this.baseCells.forEach(i=>{i.forEach(a=>{a.x=a.x/t*e,a.y=a.y/t*e})}),this.squares.forEach(i=>{i.x=i.x/t*e,i.y=i.y/t*e,i.size=i.size/t*e})});e&&S(this,f,e),a&&(this.gap=a),i&&(this.palette=i),S(this,C,t),S(this,u,t/l(this,f)),this.addPerSecond=l(this,f),this.addPerSecondCurrent=this.addPerSecond,this.makeGrid()}}f=new WeakMap,u=new WeakMap,C=new WeakMap;const d={width:window.innerWidth,height:window.innerHeight},{ctx:w,resizeCanvas:B}=T(d.width,d.height);let g,D=[["#fcab30","#ff626a","#4C1E4F","#496ddb","#FFC4EB"],["#4c1e4f","#07beb8","#fee1c7","#fb7232","#f44174"],["#f75c03","#d90368","#e5beed","#820263","#291720","#04a777"]],x,q;window.addEventListener("resize",()=>{d.width=window.innerWidth,d.height=window.innerHeight,B(d.width,d.height),g=Math.min(d.width,d.height)*.9,x.resize(g),w.save(),w.translate((d.width-g)/2,(d.height-g)/2),x.drawSquares(w),w.restore()});function H(s){w.save(),w.translate((d.width-g)/2,(d.height-g)/2),x.drawSquaresAnimate(w,s)&&q.stop(),w.restore()}function F(){w.clearRect(0,0,d.width,d.height),g=Math.min(d.width,d.height)*.9;let s=z(y(D));x=new W({palette:s,steps:30,size:g}),x.makeSquares(),(!q||q.isStopped())&&(q=G(H))}window.addEventListener("click",F);F();
