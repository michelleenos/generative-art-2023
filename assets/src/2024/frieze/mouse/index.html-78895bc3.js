var O=Object.defineProperty;var D=(e,r,a)=>r in e?O(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a;var f=(e,r,a)=>(D(e,typeof r!="symbol"?r+"":r,a),a);import"../../../../modulepreload-polyfill-3cfb730f.js";/* empty css                        */import{c as P}from"../../../../index-8d178fc0.js";import{G as X}from"../../../../lil-gui.esm-da8e181f.js";import{T}from"../../../../tiles-6f6dc443.js";const Y="/generative-art-2023/assets/foot-a71e6e54.png";let S=900,M=600,{ctx:u,canvas:y}=P(S,M);const t={tileSize:300,frieze:"hop",type:"tile",radius:5,translateAmount:1,glideAmount:.5,verticalMirror:.5,rotateOriginX:.75,rotateOriginY:1,horizontalMirror:1,debugTranslations:!1,debugImg:!1},E={resetDefaults:()=>{t.translateAmount=1,t.glideAmount=.5,t.verticalMirror=.5,t.rotateOriginX=.75,t.rotateOriginY=1,t.horizontalMirror=1,o.controllersRecursive().forEach(e=>e.updateDisplay())}};class L{constructor(r,a=300){f(this,"canvas");f(this,"isDrawing",!1);f(this,"tileSize");f(this,"drawFn");f(this,"onMouseDown",()=>{this.isDrawing=!0,this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseup",this.onMouseUp),this.canvas.addEventListener("mouseleave",this.onMouseUp)});f(this,"onMouseMove",r=>{this.isDrawing&&this.drawFn&&this.drawFn(r.clientX,r.clientY)});f(this,"onMouseUp",()=>{this.isDrawing=!1,this.canvas.removeEventListener("mousemove",this.onMouseMove),this.canvas.removeEventListener("mouseup",this.onMouseUp)});this.canvas=r,this.tileSize=a,this.canvas.addEventListener("mousedown",this.onMouseDown)}}let A=[];const $=new L(y);let h=t.tileSize*3;const n=new T(h,h,window.devicePixelRatio);n.ctx.translate(h*.5,h*.5);n.ctx.translate(-t.tileSize*.5,-t.tileSize*.5);let b=document.createElement("div");b.setAttribute("style","width: 200px; height: 200px; background: #fff; position: fixed; bottom: 0; left: 0;");n.canvas.setAttribute("style","width: 100%; height: 100%");b.appendChild(n.canvas);document.body.appendChild(b);const k={hop(e,r){let a=t.tileSize;for(let i=-10;i<10;i++)e.save(),e.translate(i*a*t.translateAmount,0),s(e,r),e.restore()},jump(e,r){let a=t.tileSize;for(let i=-10;i<10;i++)e.save(),e.translate(i*a*t.translateAmount,0),s(e,r),t.debugTranslations&&i===0&&l(e,a,"red",0),e.translate(0,t.horizontalMirror*a),t.debugTranslations&&i===0&&l(e,a,"blue",0),e.scale(1,-1),e.translate(0,-t.horizontalMirror*a),t.debugTranslations&&i===0&&l(e,a,"green",1),s(e,r),e.restore()},sidle(e,r){let a=t.tileSize;e.save();for(let i=-10;i<10;i+=1)e.save(),e.translate(i*a*t.translateAmount,0),s(e,r),t.debugTranslations&&i===0&&l(e,a,"red",0),e.translate(a*t.verticalMirror,0),e.scale(-1,1),e.translate(a*-t.verticalMirror,0),t.debugTranslations&&i===0&&l(e,a,"blue",1),s(e,r),e.restore();e.restore()},step(e,r){let a=t.tileSize;for(let i=-10;i<10;i++)e.save(),e.translate(i*a*t.translateAmount,0),t.debugTranslations&&i===1&&l(e,a,"red",0),s(e,r),e.translate(a*t.glideAmount,0),e.translate(0,t.horizontalMirror*a),e.scale(1,-1),t.debugTranslations&&i===1&&l(e,a,"green",1),e.translate(0,-t.horizontalMirror*a),t.debugTranslations&&i===1&&l(e,a,"blue",1),s(e,r),e.restore()},spinHop(e,r){let a=t.tileSize;for(let i=-10;i<10;i+=1)e.save(),e.translate(i*a*t.translateAmount,0),t.debugTranslations&&i===0&&l(e,a,"red",0),s(e,r),e.translate(a*t.rotateOriginX,a*t.rotateOriginY),e.rotate(Math.PI),e.translate(-a*t.rotateOriginX,-a*t.rotateOriginY),s(e,r),t.debugTranslations&&i===0&&l(e,a,"blue",3),e.restore()},spinSidle(e,r){let a=t.tileSize;for(let i=-10;i<10;i++)e.save(),e.translate(i*a*t.translateAmount,0),s(e,r),t.debugTranslations&&i===0&&l(e,a,"red",0),e.save(),e.translate(a*t.verticalMirror,0),e.scale(-1,1),e.translate(a*-t.verticalMirror,0),s(e,r),e.restore(),e.translate(a*t.rotateOriginX,a*t.rotateOriginY),e.rotate(Math.PI),e.translate(-a*t.rotateOriginX,-a*t.rotateOriginY),t.debugTranslations&&i===0&&l(e,a,"green",1),s(e,r),e.save(),e.translate(a*t.verticalMirror,0),e.scale(-1,1),e.translate(a*-t.verticalMirror,0),s(e,r),e.restore(),e.restore()},spinJump(e,r){let a=t.tileSize;for(let i=-10;i<10;i++)e.save(),e.translate(i*a*t.translateAmount,0),t.debugTranslations&&i===0&&l(e,a,"green",0),s(e,r),e.save(),e.translate(a*t.verticalMirror,0),e.scale(-1,1),e.translate(a*-t.verticalMirror,0),t.debugTranslations&&i===0&&l(e,a,"blue",1),s(e,r),e.restore(),e.translate(0,a*t.horizontalMirror),e.scale(1,-1),e.translate(0,-a*t.horizontalMirror),t.debugTranslations&&i===0&&l(e,a,"red",0),s(e,r),e.translate(a*t.verticalMirror,0),e.scale(-1,1),e.translate(a*-t.verticalMirror,0),t.debugTranslations&&i===0&&l(e,a,"blue",1),s(e,r),e.restore()}};$.drawFn=(e,r)=>{u.fillStyle="#000";let a=e%(t.tileSize*t.translateAmount),i=r%t.tileSize;A.push({x:e,y:r,tileX:a,tileY:i}),n.ctx.fillStyle="#000",n.ctx.beginPath(),n.ctx.arc(a,r,t.radius,0,Math.PI*2),n.ctx.fill(),p()};const l=(e,r,a,i)=>{e.save();let d=a==="red"?[255,0,0]:a==="green"?[0,255,0]:[0,0,255];e.strokeStyle=`rgba(${d[0]}, ${d[1]}, ${d[2]}, 0.2)`,e.beginPath(),e.rect(0,0,r,r),e.stroke(),e.clip();let g=r*2,w=16,z=g/w;e.lineWidth=z*.5,e.translate(r*.5,r*.5),e.rotate(Math.PI*.25*i),e.translate(-g*.5,-g*.5);for(let m=0;m<w;m++)e.beginPath(),e.moveTo((m+.5)*z,0),e.lineTo((m+.5)*z,g),e.stroke();e.restore(),e.save(),e.fillStyle=`rgba(${d[0]}, ${d[1]}, ${d[2]}, 0.4)`,e.textAlign="center",e.textBaseline="middle",e.font=`bold ${r*.5}px sans-serif`,e.fillText("a",r*.5,r*.5),e.restore()};function I(){u.fillStyle="#fff",u.fillRect(0,0,S,M),u.beginPath();let e=Math.ceil(S/t.tileSize),r=Math.ceil(M/t.tileSize);for(let a=-e;a<e;a++)for(let i=-r;i<r;i++)u.moveTo(a*t.tileSize,i*t.tileSize),u.lineTo(a*t.tileSize+t.tileSize,i*t.tileSize),u.moveTo(a*t.tileSize,i*t.tileSize),u.lineTo(a*t.tileSize,i*t.tileSize+t.tileSize);u.stroke()}const o=new X;o.add(t,"frieze",["hop","jump","sidle","step","spinHop","spinSidle","spinJump"]);o.add(t,"translateAmount",.1,2,.01);o.add(t,"glideAmount",0,2,.01);o.add(t,"verticalMirror",0,1,.01);o.add(t,"horizontalMirror",0,1,.01);o.add(t,"rotateOriginX",0,2,.01);o.add(t,"rotateOriginY",0,2,.01);o.add(t,"debugTranslations");o.add(t,"debugImg");o.add(E,"resetDefaults");o.onChange(p);window.addEventListener("keydown",e=>{e.code==="Space"&&(C(),I(),A=[])});function C(){n.ctx.clearRect(-t.tileSize,-t.tileSize,n.w,n.h)}const s=(e,r)=>{e.drawImage(r.canvas,-t.tileSize,-t.tileSize,r.w,r.h)};function p(){I();let e=t.tileSize,r=new T(n.w,n.h,window.devicePixelRatio);if(r.ctx.drawImage(n.canvas,0,0,n.w,n.h),t.debugImg){let a=v.height/v.width,i=e*.8,d=e*.1,g=e*.2;r.ctx.save(),r.ctx.translate(h*.5,h*.5),r.ctx.translate(-t.tileSize*.5,-t.tileSize*.5),t.frieze==="sidle"&&(i*=.5,r.ctx.translate(e*.45,e*.5),r.ctx.rotate(Math.PI*-.5),r.ctx.translate(-e*.45,-e*.5)),t.frieze==="spinSidle"&&(i*=.5,r.ctx.translate(e*.5,e*.5),r.ctx.rotate(Math.PI*.5),r.ctx.translate(-e*.5,-e*.5),d=e*.5,g=e*.15),t.frieze==="spinJump"&&(i*=.5,g=e*.6,d=e*.05),r.ctx.drawImage(v,d,g,i,i*a),r.ctx.restore()}k[t.frieze](u,r)}let v=new Image;v.src=Y;v.onload=p;p();
