import"../../../modulepreload-polyfill-3cfb730f.js";import{G as $}from"../../../lil-gui.esm-da8e181f.js";import{c as q}from"../../../index-8d178fc0.js";/* empty css                     */import{r as R}from"../../../utils-410b772c.js";let W=[[1,0],[0,-1],[0,1],[-1,0]];const F=({innerGrid:l,startPoint:n=[0,0],symmetry:a="reflect",edgesAttempts:t,edgesMax:h,edgesBreak:m})=>{let[s,i]=n,d=[[s,i]],c={},u=l,y=l;a==="horizontal"&&(u*=2),a==="vertical"&&(y*=2);const A=(v,x)=>{let p=`${v}-${x}`;return c[p]||(c[p]=[]),c[p]};let g=0,M=0,w=!1;for(;g<t&&M<h;){let v=A(s,i),x=[...W].filter(([G,S])=>!(s+G<0||s+G>u||i+S<0||i+S>y||v.find(([z,T])=>z===s+G&&T===i+S)));if(x.length===0){s=Math.floor(Math.random()*(u+1)),i=Math.floor(Math.random()*(y+1)),g++,d.push(!1),d.push([s,i]);continue}w&&(d.push([s,i]),w=!1,M++);let p=s,C=i,B=R(x);s+=B[0],i+=B[1],v.push([s,i]),A(s,i).push([p,C]),d.push([s,i]),M++,g++,g%m===0&&(d.push(!1),s=Math.floor(Math.random()*(u+1)),i=Math.floor(Math.random()*(y+1)),w=!0)}return{points:d,edges:c,attempts:g,pointsCount:M}};let P=window.innerWidth,k=window.innerHeight,{ctx:e,canvas:H}=q(P,k),r={tiles:3,padding:.15,edgesMax:15,edgesAttempts:20,edgesBreak:4,innerGrid:3,startPoint:[1,1],symmetry:"reflect"},f=new $().close();f.add(r,"tiles",1,10,1);f.add(r,"padding",0,.5,.01);f.add(r,"edgesMax",1,50,1);f.add(r,"edgesAttempts",1,50,1);f.add(r,"edgesBreak",1,50,1);f.add(r,"innerGrid",1,10,1);f.add(r.startPoint,"0",0,10,1).name("start x");f.add(r.startPoint,"1",0,10,1).name("start y");f.add(r,"symmetry",["reflect","rotate","horizontal","vertical"]);f.onChange(()=>{E(),b()});H.addEventListener("click",()=>{E(),b()});let I=[];function o(l,n,a){let t=n/r.innerGrid;for(let h=1;h<l.length;h++){let m=l[h-1],s=l[h];if(m===!1||s===!1)continue;let[i,d]=m,[c,u]=s;e.beginPath(),e.moveTo(i*t,d*t),e.lineTo(c*t,u*t),e.stroke()}a&&L(a,n)}function L(l,n){let a=n/r.innerGrid;l.forEach(t=>{t.enclosed?e.fillStyle="rgba(255,255,255,0.5)":e.fillStyle=`hsla(${Math.random()*360}, 100%, 50%, 0.1)`,t.cells.forEach(m=>{let s=m.split("-"),i=parseInt(s[0]),d=parseInt(s[1]);e.fillRect(i*a,d*a,a,a)})})}function Q(l,n,a){let t=n/2;e.save(),r.symmetry==="reflect"?(e.translate(t,t),e.scale(1,-1),o(l,t,a),e.scale(1,-1),o(l,t,a),e.scale(-1,1),o(l,t,a),e.scale(1,-1),o(l,t,a)):r.symmetry==="rotate"?(e.translate(t,t),o(l,t,a),e.rotate(Math.PI/2),o(l,t,a),e.rotate(Math.PI/2),o(l,t,a),e.rotate(Math.PI/2),o(l,t,a)):r.symmetry==="horizontal"?(e.translate(0,t),o(l,t),e.scale(1,-1),o(l,t)):r.symmetry==="vertical"&&(e.translate(t,0),o(l,t),e.scale(-1,1),o(l,t)),e.restore()}function E(){I=[];for(let l=0;l<r.tiles*r.tiles;l++)I.push(F({startPoint:r.startPoint,innerGrid:r.innerGrid,symmetry:r.symmetry,edgesAttempts:r.edgesAttempts,edgesMax:r.edgesMax,edgesBreak:r.edgesBreak}))}function b(){e.fillStyle="#121212",e.fillRect(0,0,P,k);let l=Math.min(P,k)*.85;e.save(),e.translate((P-l)/2,(k-l)/2),e.lineWidth=3,e.lineCap="round",e.strokeStyle="#fff",e.fillStyle="#fff";let n=l/r.tiles,a=n*r.padding,t=n-a*2;I.forEach(({points:h},m)=>{let s=m%r.tiles,i=Math.floor(m/r.tiles);e.save(),e.translate(s*n+a,i*n+a),Q(h,t),e.restore()}),e.restore()}E();b();
