var p=Object.defineProperty;var b=(t,s,i)=>s in t?p(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i;var r=(t,s,i)=>(b(t,typeof s!="symbol"?s+"":s,i),i);import"../../../modulepreload-polyfill-3cfb730f.js";/* empty css                     */import{p as m}from"../../../p5.min-89a01bf6.js";import"../../../p5.sound-2825c463.js";import"../../../_commonjsHelpers-725317a4.js";import"../../../_commonjs-dynamic-modules-302442b1.js";var a=[57,60,62,64,67,69,72,74,76,79,81,84];new m(t=>{let s,i,d=60,f=8,c=0,h=[];class w{constructor(l,e,n,u,g){r(this,"pos");r(this,"w");r(this,"h");r(this,"pitch");r(this,"on");r(this,"step");this.pos=l,this.w=e,this.h=n,this.pitch=u,this.on=!1,this.step=g}display(){t.stroke(200,0,150),t.strokeWeight(2),t.fill(this.on?100:this.step===c?150:200),t.rect(this.pos.x,this.pos.y,this.w,this.h)}toggle(){this.on=!this.on}}function y(){let o=t.width/f,l=t.height/a.length;for(let e=0;e<f;e++){h[e]=[];for(let n=0;n<a.length;n++){let u=e*o,g=n*l;h[e][n]=new w(t.createVector(u,g),o,l,a[n],e)}}}t.setup=function(){t.createCanvas(600,400),y(),s=new m.PolySynth,i=new m.SoundLoop(k,"8n"),i.bpm=d,t.frameRate(10),t.createButton("play/pause").mouseClicked(()=>{i.isPlaying?i.pause():i.start()})};function k(o){c=(c+1)%f;let l=.5;for(let e=0;e<a.length;e++)if(h[c][e].on){let n=t.midiToFreq(h[c][e].pitch);s.play(n,.1,o,l)}}t.draw=function(){t.background(255),t.noStroke();for(let o=0;o<h.length;o++)for(let l=0;l<h[o].length;l++)h[o][l].display();t.noStroke(),t.fill(0),t.text(c,t.width-20,t.height-20)},t.mouseClicked=function(){let o=t.floor(t.mouseX/(t.width/f)),l=t.floor(t.mouseY/(t.height/a.length)),e=h[o][l];e&&e.toggle()}},document.getElementById("sketch")??void 0);
