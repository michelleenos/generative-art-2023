var x=Object.defineProperty;var M=(t,e,r)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var s=(t,e,r)=>(M(t,typeof e!="symbol"?e+"":e,r),r);import"../../../modulepreload-polyfill-3cfb730f.js";/* empty css                     */import{c as f}from"../../../index-8d178fc0.js";import{c as R}from"../../../petal-feaf2d7c.js";import{l as k}from"../../../loop-9a51de3b.js";import{r as i,m as d}from"../../../utils-410b772c.js";import{m as Y}from"../../../canvas-images-d0bfdd66.js";import"../../../jszip.min-f5692425.js";import"../../../_commonjsHelpers-725317a4.js";import"../../../_commonjs-dynamic-modules-302442b1.js";let m=document.createElement("button");m.innerText="make zip";var X;(X=document.getElementById("btns"))==null||X.appendChild(m);let c=800,l=800,{ctx:n,canvas:P}=f(c,l,!0),a=Math.min(c,l),{getImage:C,downloadZip:v}=Y(P);const o={numPetals:7,controlVarX:.1,controlVarY:.02,controlRangeX:[.01,.01],endRangeX:[-.1,.1],pace:5e-4,rotation:0,cp1Mult:{x:2.2,y:.5},cp2Mult:{x:.5,y:.7}};class E{constructor(e=5,r=a*.5){s(this,"petal");s(this,"scaleX",0);s(this,"skewY",0);s(this,"numPetals");s(this,"ctx",f(a,a,!0,!1).ctx);s(this,"scaleXVar");s(this,"skewYVar");s(this,"rotateStart",i(0,Math.PI));s(this,"rotateEach",3e-4);s(this,"rotateCurrent",this.rotateStart);s(this,"count",0);this.numPetals=e,this.petal=R(this.ctx,{x:a/2,y:a/2,endRangeX:[a*o.endRangeX[0],a*o.endRangeX[1]],endRangeY:[r,r],controlRangeX:[a*o.controlRangeX[0],a*o.controlRangeX[1]],controlVarX:a*o.controlVarX,controlVarY:a*o.controlVarY,rotation:0,cp1Mult:o.cp1Mult,cp2Mult:o.cp2Mult}),this.ctx.strokeStyle="rgba(255,255,255,0.1)",this.ctx.lineWidth=.5,this.scaleXVar=[i(.8,1),i(1.4,2)],i()<.5&&([this.scaleXVar[0],this.scaleXVar[1]]=[this.scaleXVar[1],this.scaleXVar[0]]),this.skewYVar=[-.3,.3],console.log({scaleXVar:this.scaleXVar,skewYVar:this.skewYVar,petalEnd:this.petal.end,petalCp1:this.petal.cp1,petalCp2:this.petal.cp2})}drawOffscreen(e){this.petal.draw(e)}draw(e){e*=o.pace,this.count++,this.rotateCurrent+=this.rotateEach,this.drawOffscreen(e);let r=d(Math.sin(-this.rotateCurrent*10),-1,1,this.scaleXVar[0],this.scaleXVar[1]),w=d(Math.cos(-this.rotateCurrent*13),-1,1,this.skewYVar[0],this.skewYVar[1]);for(let h=0;h<this.numPetals;h++){let g=h*(Math.PI*2)/this.numPetals;n.save(),n.translate(c/2,l/2),n.rotate(g+this.rotateCurrent),n.transform(r,w,0,1,0,0),n.translate(-a/2,-a/2),n.drawImage(this.ctx.canvas,0,0,this.ctx.canvas.width,this.ctx.canvas.height,0,0,a,a),n.restore()}}}let u=0;function V(){u++,n.clearRect(0,0,c,l),n.fillStyle="#171717",n.fillRect(0,0,c,l),p.forEach(t=>{t.draw(u*10)})}let p=[];for(let t=0;t<1;t++)p.push(new E(o.numPetals,a*.35));function y(){let t=0;const e=r=>{V(),C().then(()=>{r++,console.log(r),r===1e3?v():e(r)})};e(t)}let I=k(V);m.addEventListener("click",()=>{I.stop(),p.forEach(t=>{t.ctx.clearRect(0,0,t.ctx.canvas.width,t.ctx.canvas.height),t.rotateCurrent=t.rotateStart}),y()});
