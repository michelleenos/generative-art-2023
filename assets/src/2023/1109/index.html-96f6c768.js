var m=Object.defineProperty;var v=(i,e,t)=>e in i?m(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var a=(i,e,t)=>(v(i,typeof e!="symbol"?e+"":e,t),t);import"../../../modulepreload-polyfill-3cfb730f.js";import{c as p}from"../../../index-8d178fc0.js";/* empty css                     */import{l as x}from"../../../loop-9a51de3b.js";import{r as M,l as y}from"../../../utils-410b772c.js";const h={scale:10};let s=Math.min(window.innerWidth,500),o=Math.min(window.innerHeight,500),{ctx:l,resizeCanvas:u}=p(s,o);class g{constructor(e,t){a(this,"cols");a(this,"rows");a(this,"a");a(this,"b");a(this,"field",[]);this.cols=e,this.rows=t,this.a=10,this.b=6.5}update(){for(let e=0;e<this.cols;e++)for(let t=0;t<this.rows;t++){let n=e+t*this.cols,c=e/this.cols,f=t/this.rows,w=Math.sin(c*this.a)-Math.cos(c*this.b)*Math.cos(f*this.a);w*=Math.PI,this.field[n]=w}}drawField(){l.save(),l.globalAlpha=.1;for(let e=0;e<this.cols;e++)for(let t=0;t<this.rows;t++){let n=e+t*this.cols;l.save(),l.translate(e*h.scale,t*h.scale),l.rotate(this.field[n]),l.strokeStyle="#fff",l.lineWidth=2,l.beginPath(),l.moveTo(0,0),l.lineTo(10,0),l.stroke(),l.arc(0,0,3,0,Math.PI*2),l.fillStyle="#f0f",l.fill(),l.restore()}l.restore()}clear(){this.field.fill(0)}}let d=[],r,F=50;function b(){r=new g(s/h.scale,o/h.scale),r.update();for(let i=0;i<F;i++){let e=M(s),t=M(o);d.push({x:e,y:t,vel:0})}r.drawField()}function P(i){l.clearRect(0,0,s,o),r.drawField();for(let e=0;e<d.length;e++){let t=d[e],n=Math.floor(t.x/h.scale),c=Math.floor(t.y/h.scale),f=r.field[n+c*r.cols];t.vel=y(t.vel,f,.1),t.x+=Math.cos(t.vel)*4,t.y+=Math.sin(t.vel)*4,(t.x<0||t.x>s||t.y<0||t.y>o)&&(t.x=Math.floor(Math.random()*s),t.y=Math.floor(Math.random()*o),t.vel=0),l.fillStyle="#fff",l.fillRect(t.x,t.y,1,1)}}window.addEventListener("resize",()=>{s=Math.min(window.innerWidth,500),o=Math.min(window.innerHeight,500),u(s,o)});b();x(P);
