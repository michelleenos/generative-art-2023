var N=Object.defineProperty;var q=(b,n,e)=>n in b?N(b,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):b[n]=e;var I=(b,n,e)=>(q(b,typeof n!="symbol"?n+"":n,e),e);import"../../../modulepreload-polyfill-3cfb730f.js";/* empty css                     */import{g as H}from"../../../_commonjsHelpers-725317a4.js";import{P as W}from"../../../particle-dea30da6.js";import{t as J}from"../../../utils-410b772c.js";import{t as D}from"../../../tweakpane-9ece380b.js";import{p as A}from"../../../p5.min-89a01bf6.js";import"../../../_commonjs-dynamic-modules-302442b1.js";var T={exports:{}};/*!
Copyright (C) 2010-2013 Raymond Hill: https://github.com/gorhill/Javascript-Voronoi
MIT License: See https://github.com/gorhill/Javascript-Voronoi/LICENSE.md
*/(function(b){function n(){this.vertices=null,this.edges=null,this.cells=null,this.toRecycle=null,this.beachsectionJunkyard=[],this.circleEventJunkyard=[],this.vertexJunkyard=[],this.edgeJunkyard=[],this.cellJunkyard=[]}n.prototype.reset=function(){if(this.beachline||(this.beachline=new this.RBTree),this.beachline.root)for(var e=this.beachline.getFirst(this.beachline.root);e;)this.beachsectionJunkyard.push(e),e=e.rbNext;this.beachline.root=null,this.circleEvents||(this.circleEvents=new this.RBTree),this.circleEvents.root=this.firstCircleEvent=null,this.vertices=[],this.edges=[],this.cells=[]},n.prototype.sqrt=Math.sqrt,n.prototype.abs=Math.abs,n.prototype.ε=n.ε=1e-9,n.prototype.invε=n.invε=1/n.ε,n.prototype.equalWithEpsilon=function(e,r){return this.abs(e-r)<1e-9},n.prototype.greaterThanWithEpsilon=function(e,r){return e-r>1e-9},n.prototype.greaterThanOrEqualWithEpsilon=function(e,r){return r-e<1e-9},n.prototype.lessThanWithEpsilon=function(e,r){return r-e>1e-9},n.prototype.lessThanOrEqualWithEpsilon=function(e,r){return e-r<1e-9},n.prototype.RBTree=function(){this.root=null},n.prototype.RBTree.prototype.rbInsertSuccessor=function(e,r){var i;if(e){if(r.rbPrevious=e,r.rbNext=e.rbNext,e.rbNext&&(e.rbNext.rbPrevious=r),e.rbNext=r,e.rbRight){for(e=e.rbRight;e.rbLeft;)e=e.rbLeft;e.rbLeft=r}else e.rbRight=r;i=e}else this.root?(e=this.getFirst(this.root),r.rbPrevious=null,r.rbNext=e,e.rbPrevious=r,e.rbLeft=r,i=e):(r.rbPrevious=r.rbNext=null,this.root=r,i=null);r.rbLeft=r.rbRight=null,r.rbParent=i,r.rbRed=!0;var t,s;for(e=r;i&&i.rbRed;)t=i.rbParent,i===t.rbLeft?(s=t.rbRight,s&&s.rbRed?(i.rbRed=s.rbRed=!1,t.rbRed=!0,e=t):(e===i.rbRight&&(this.rbRotateLeft(i),e=i,i=e.rbParent),i.rbRed=!1,t.rbRed=!0,this.rbRotateRight(t))):(s=t.rbLeft,s&&s.rbRed?(i.rbRed=s.rbRed=!1,t.rbRed=!0,e=t):(e===i.rbLeft&&(this.rbRotateRight(i),e=i,i=e.rbParent),i.rbRed=!1,t.rbRed=!0,this.rbRotateLeft(t))),i=e.rbParent;this.root.rbRed=!1},n.prototype.RBTree.prototype.rbRemoveNode=function(e){e.rbNext&&(e.rbNext.rbPrevious=e.rbPrevious),e.rbPrevious&&(e.rbPrevious.rbNext=e.rbNext),e.rbNext=e.rbPrevious=null;var r=e.rbParent,i=e.rbLeft,t=e.rbRight,s;i?t?s=this.getFirst(t):s=i:s=t,r?r.rbLeft===e?r.rbLeft=s:r.rbRight=s:this.root=s;var f;if(i&&t?(f=s.rbRed,s.rbRed=e.rbRed,s.rbLeft=i,i.rbParent=s,s!==t?(r=s.rbParent,s.rbParent=e.rbParent,e=s.rbRight,r.rbLeft=e,s.rbRight=t,t.rbParent=s):(s.rbParent=r,r=s,e=s.rbRight)):(f=e.rbRed,e=s),e&&(e.rbParent=r),!f){if(e&&e.rbRed){e.rbRed=!1;return}var a;do{if(e===this.root)break;if(e===r.rbLeft){if(a=r.rbRight,a.rbRed&&(a.rbRed=!1,r.rbRed=!0,this.rbRotateLeft(r),a=r.rbRight),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){(!a.rbRight||!a.rbRight.rbRed)&&(a.rbLeft.rbRed=!1,a.rbRed=!0,this.rbRotateRight(a),a=r.rbRight),a.rbRed=r.rbRed,r.rbRed=a.rbRight.rbRed=!1,this.rbRotateLeft(r),e=this.root;break}}else if(a=r.rbLeft,a.rbRed&&(a.rbRed=!1,r.rbRed=!0,this.rbRotateRight(r),a=r.rbLeft),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){(!a.rbLeft||!a.rbLeft.rbRed)&&(a.rbRight.rbRed=!1,a.rbRed=!0,this.rbRotateLeft(a),a=r.rbLeft),a.rbRed=r.rbRed,r.rbRed=a.rbLeft.rbRed=!1,this.rbRotateRight(r),e=this.root;break}a.rbRed=!0,e=r,r=r.rbParent}while(!e.rbRed);e&&(e.rbRed=!1)}},n.prototype.RBTree.prototype.rbRotateLeft=function(e){var r=e,i=e.rbRight,t=r.rbParent;t?t.rbLeft===r?t.rbLeft=i:t.rbRight=i:this.root=i,i.rbParent=t,r.rbParent=i,r.rbRight=i.rbLeft,r.rbRight&&(r.rbRight.rbParent=r),i.rbLeft=r},n.prototype.RBTree.prototype.rbRotateRight=function(e){var r=e,i=e.rbLeft,t=r.rbParent;t?t.rbLeft===r?t.rbLeft=i:t.rbRight=i:this.root=i,i.rbParent=t,r.rbParent=i,r.rbLeft=i.rbRight,r.rbLeft&&(r.rbLeft.rbParent=r),i.rbRight=r},n.prototype.RBTree.prototype.getFirst=function(e){for(;e.rbLeft;)e=e.rbLeft;return e},n.prototype.RBTree.prototype.getLast=function(e){for(;e.rbRight;)e=e.rbRight;return e},n.prototype.Diagram=function(e){this.site=e},n.prototype.Cell=function(e){this.site=e,this.halfedges=[],this.closeMe=!1},n.prototype.Cell.prototype.init=function(e){return this.site=e,this.halfedges=[],this.closeMe=!1,this},n.prototype.createCell=function(e){var r=this.cellJunkyard.pop();return r?r.init(e):new this.Cell(e)},n.prototype.Cell.prototype.prepareHalfedges=function(){for(var e=this.halfedges,r=e.length,i;r--;)i=e[r].edge,(!i.vb||!i.va)&&e.splice(r,1);return e.sort(function(t,s){return s.angle-t.angle}),e.length},n.prototype.Cell.prototype.getNeighborIds=function(){for(var e=[],r=this.halfedges.length,i;r--;)i=this.halfedges[r].edge,i.lSite!==null&&i.lSite.voronoiId!=this.site.voronoiId?e.push(i.lSite.voronoiId):i.rSite!==null&&i.rSite.voronoiId!=this.site.voronoiId&&e.push(i.rSite.voronoiId);return e},n.prototype.Cell.prototype.getBbox=function(){for(var e=this.halfedges,r=e.length,i=1/0,t=1/0,s=-1/0,f=-1/0,a,l,c;r--;)a=e[r].getStartpoint(),l=a.x,c=a.y,l<i&&(i=l),c<t&&(t=c),l>s&&(s=l),c>f&&(f=c);return{x:i,y:t,width:s-i,height:f-t}},n.prototype.Cell.prototype.pointIntersection=function(e,r){for(var i=this.halfedges,t=i.length,s,f,a,l;t--;){if(s=i[t],f=s.getStartpoint(),a=s.getEndpoint(),l=(r-f.y)*(a.x-f.x)-(e-f.x)*(a.y-f.y),!l)return 0;if(l>0)return-1}return 1},n.prototype.Vertex=function(e,r){this.x=e,this.y=r},n.prototype.Edge=function(e,r){this.lSite=e,this.rSite=r,this.va=this.vb=null},n.prototype.Halfedge=function(e,r,i){if(this.site=r,this.edge=e,i)this.angle=Math.atan2(i.y-r.y,i.x-r.x);else{var t=e.va,s=e.vb;this.angle=e.lSite===r?Math.atan2(s.x-t.x,t.y-s.y):Math.atan2(t.x-s.x,s.y-t.y)}},n.prototype.createHalfedge=function(e,r,i){return new this.Halfedge(e,r,i)},n.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb},n.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va},n.prototype.createVertex=function(e,r){var i=this.vertexJunkyard.pop();return i?(i.x=e,i.y=r):i=new this.Vertex(e,r),this.vertices.push(i),i},n.prototype.createEdge=function(e,r,i,t){var s=this.edgeJunkyard.pop();return s?(s.lSite=e,s.rSite=r,s.va=s.vb=null):s=new this.Edge(e,r),this.edges.push(s),i&&this.setEdgeStartpoint(s,e,r,i),t&&this.setEdgeEndpoint(s,e,r,t),this.cells[e.voronoiId].halfedges.push(this.createHalfedge(s,e,r)),this.cells[r.voronoiId].halfedges.push(this.createHalfedge(s,r,e)),s},n.prototype.createBorderEdge=function(e,r,i){var t=this.edgeJunkyard.pop();return t?(t.lSite=e,t.rSite=null):t=new this.Edge(e,null),t.va=r,t.vb=i,this.edges.push(t),t},n.prototype.setEdgeStartpoint=function(e,r,i,t){!e.va&&!e.vb?(e.va=t,e.lSite=r,e.rSite=i):e.lSite===i?e.vb=t:e.va=t},n.prototype.setEdgeEndpoint=function(e,r,i,t){this.setEdgeStartpoint(e,i,r,t)},n.prototype.Beachsection=function(){},n.prototype.createBeachsection=function(e){var r=this.beachsectionJunkyard.pop();return r||(r=new this.Beachsection),r.site=e,r},n.prototype.leftBreakPoint=function(e,r){var i=e.site,t=i.x,s=i.y,f=s-r;if(!f)return t;var a=e.rbPrevious;if(!a)return-1/0;i=a.site;var l=i.x,c=i.y,h=c-r;if(!h)return l;var p=l-t,o=1/f-1/h,u=p/h;return o?(-u+this.sqrt(u*u-2*o*(p*p/(-2*h)-c+h/2+s-f/2)))/o+t:(t+l)/2},n.prototype.rightBreakPoint=function(e,r){var i=e.rbNext;if(i)return this.leftBreakPoint(i,r);var t=e.site;return t.y===r?t.x:1/0},n.prototype.detachBeachsection=function(e){this.detachCircleEvent(e),this.beachline.rbRemoveNode(e),this.beachsectionJunkyard.push(e)},n.prototype.removeBeachsection=function(e){var r=e.circleEvent,i=r.x,t=r.ycenter,s=this.createVertex(i,t),f=e.rbPrevious,a=e.rbNext,l=[e],c=Math.abs;this.detachBeachsection(e);for(var h=f;h.circleEvent&&c(i-h.circleEvent.x)<1e-9&&c(t-h.circleEvent.ycenter)<1e-9;)f=h.rbPrevious,l.unshift(h),this.detachBeachsection(h),h=f;l.unshift(h),this.detachCircleEvent(h);for(var p=a;p.circleEvent&&c(i-p.circleEvent.x)<1e-9&&c(t-p.circleEvent.ycenter)<1e-9;)a=p.rbNext,l.push(p),this.detachBeachsection(p),p=a;l.push(p),this.detachCircleEvent(p);var o=l.length,u;for(u=1;u<o;u++)p=l[u],h=l[u-1],this.setEdgeStartpoint(p.edge,h.site,p.site,s);h=l[0],p=l[o-1],p.edge=this.createEdge(h.site,p.site,void 0,s),this.attachCircleEvent(h),this.attachCircleEvent(p)},n.prototype.addBeachsection=function(e){for(var r=e.x,i=e.y,t,s,f,a,l=this.beachline.root;l;)if(f=this.leftBreakPoint(l,i)-r,f>1e-9)l=l.rbLeft;else if(a=r-this.rightBreakPoint(l,i),a>1e-9){if(!l.rbRight){t=l;break}l=l.rbRight}else{f>-1e-9?(t=l.rbPrevious,s=l):a>-1e-9?(t=l,s=l.rbNext):t=s=l;break}var c=this.createBeachsection(e);if(this.beachline.rbInsertSuccessor(t,c),!(!t&&!s)){if(t===s){this.detachCircleEvent(t),s=this.createBeachsection(t.site),this.beachline.rbInsertSuccessor(c,s),c.edge=s.edge=this.createEdge(t.site,c.site),this.attachCircleEvent(t),this.attachCircleEvent(s);return}if(t&&!s){c.edge=this.createEdge(t.site,c.site);return}if(t!==s){this.detachCircleEvent(t),this.detachCircleEvent(s);var h=t.site,p=h.x,o=h.y,u=e.x-p,y=e.y-o,g=s.site,v=g.x-p,x=g.y-o,m=2*(u*x-y*v),R=u*u+y*y,L=v*v+x*x,E=this.createVertex((x*R-y*L)/m+p,(u*L-v*R)/m+o);this.setEdgeStartpoint(s.edge,h,g,E),c.edge=this.createEdge(h,e,void 0,E),s.edge=this.createEdge(e,g,void 0,E),this.attachCircleEvent(t),this.attachCircleEvent(s);return}}},n.prototype.CircleEvent=function(){this.arc=null,this.rbLeft=null,this.rbNext=null,this.rbParent=null,this.rbPrevious=null,this.rbRed=!1,this.rbRight=null,this.site=null,this.x=this.y=this.ycenter=0},n.prototype.attachCircleEvent=function(e){var r=e.rbPrevious,i=e.rbNext;if(!(!r||!i)){var t=r.site,s=e.site,f=i.site;if(t!==f){var a=s.x,l=s.y,c=t.x-a,h=t.y-l,p=f.x-a,o=f.y-l,u=2*(c*o-h*p);if(!(u>=-2e-12)){var y=c*c+h*h,g=p*p+o*o,v=(o*y-h*g)/u,x=(c*g-p*y)/u,m=x+l,R=this.circleEventJunkyard.pop();R||(R=new this.CircleEvent),R.arc=e,R.site=s,R.x=v+a,R.y=m+this.sqrt(v*v+x*x),R.ycenter=m,e.circleEvent=R;for(var L=null,E=this.circleEvents.root;E;)if(R.y<E.y||R.y===E.y&&R.x<=E.x)if(E.rbLeft)E=E.rbLeft;else{L=E.rbPrevious;break}else if(E.rbRight)E=E.rbRight;else{L=E;break}this.circleEvents.rbInsertSuccessor(L,R),L||(this.firstCircleEvent=R)}}}},n.prototype.detachCircleEvent=function(e){var r=e.circleEvent;r&&(r.rbPrevious||(this.firstCircleEvent=r.rbNext),this.circleEvents.rbRemoveNode(r),this.circleEventJunkyard.push(r),e.circleEvent=null)},n.prototype.connectEdge=function(e,r){var i=e.vb;if(i)return!0;var t=e.va,s=r.xl,f=r.xr,a=r.yt,l=r.yb,c=e.lSite,h=e.rSite,p=c.x,o=c.y,u=h.x,y=h.y,g=(p+u)/2,v=(o+y)/2,x,m;if(this.cells[c.voronoiId].closeMe=!0,this.cells[h.voronoiId].closeMe=!0,y!==o&&(x=(p-u)/(y-o),m=v-x*g),x===void 0){if(g<s||g>=f)return!1;if(p>u){if(!t||t.y<a)t=this.createVertex(g,a);else if(t.y>=l)return!1;i=this.createVertex(g,l)}else{if(!t||t.y>l)t=this.createVertex(g,l);else if(t.y<a)return!1;i=this.createVertex(g,a)}}else if(x<-1||x>1)if(p>u){if(!t||t.y<a)t=this.createVertex((a-m)/x,a);else if(t.y>=l)return!1;i=this.createVertex((l-m)/x,l)}else{if(!t||t.y>l)t=this.createVertex((l-m)/x,l);else if(t.y<a)return!1;i=this.createVertex((a-m)/x,a)}else if(o<y){if(!t||t.x<s)t=this.createVertex(s,x*s+m);else if(t.x>=f)return!1;i=this.createVertex(f,x*f+m)}else{if(!t||t.x>f)t=this.createVertex(f,x*f+m);else if(t.x<s)return!1;i=this.createVertex(s,x*s+m)}return e.va=t,e.vb=i,!0},n.prototype.clipEdge=function(e,r){var i=e.va.x,t=e.va.y,s=e.vb.x,f=e.vb.y,a=0,l=1,c=s-i,h=f-t,p=i-r.xl;if(c===0&&p<0)return!1;var o=-p/c;if(c<0){if(o<a)return!1;o<l&&(l=o)}else if(c>0){if(o>l)return!1;o>a&&(a=o)}if(p=r.xr-i,c===0&&p<0)return!1;if(o=p/c,c<0){if(o>l)return!1;o>a&&(a=o)}else if(c>0){if(o<a)return!1;o<l&&(l=o)}if(p=t-r.yt,h===0&&p<0)return!1;if(o=-p/h,h<0){if(o<a)return!1;o<l&&(l=o)}else if(h>0){if(o>l)return!1;o>a&&(a=o)}if(p=r.yb-t,h===0&&p<0)return!1;if(o=p/h,h<0){if(o>l)return!1;o>a&&(a=o)}else if(h>0){if(o<a)return!1;o<l&&(l=o)}return a>0&&(e.va=this.createVertex(i+a*c,t+a*h)),l<1&&(e.vb=this.createVertex(i+l*c,t+l*h)),(a>0||l<1)&&(this.cells[e.lSite.voronoiId].closeMe=!0,this.cells[e.rSite.voronoiId].closeMe=!0),!0},n.prototype.clipEdges=function(e){for(var r=this.edges,i=r.length,t,s=Math.abs;i--;)t=r[i],(!this.connectEdge(t,e)||!this.clipEdge(t,e)||s(t.va.x-t.vb.x)<1e-9&&s(t.va.y-t.vb.y)<1e-9)&&(t.va=t.vb=null,r.splice(i,1))},n.prototype.closeCells=function(e){for(var r=e.xl,i=e.xr,t=e.yt,s=e.yb,f=this.cells,a=f.length,l,c,h,p,o,u,y,g,v,x=Math.abs;a--;)if(l=f[a],!!l.prepareHalfedges()&&l.closeMe){for(h=l.halfedges,p=h.length,c=0;c<p;){if(u=h[c].getEndpoint(),g=h[(c+1)%p].getStartpoint(),x(u.x-g.x)>=1e-9||x(u.y-g.y)>=1e-9)switch(!0){case(this.equalWithEpsilon(u.x,r)&&this.lessThanWithEpsilon(u.y,s)):if(v=this.equalWithEpsilon(g.x,r),y=this.createVertex(r,v?g.y:s),o=this.createBorderEdge(l.site,u,y),c++,h.splice(c,0,this.createHalfedge(o,l.site,null)),p++,v)break;u=y;case(this.equalWithEpsilon(u.y,s)&&this.lessThanWithEpsilon(u.x,i)):if(v=this.equalWithEpsilon(g.y,s),y=this.createVertex(v?g.x:i,s),o=this.createBorderEdge(l.site,u,y),c++,h.splice(c,0,this.createHalfedge(o,l.site,null)),p++,v)break;u=y;case(this.equalWithEpsilon(u.x,i)&&this.greaterThanWithEpsilon(u.y,t)):if(v=this.equalWithEpsilon(g.x,i),y=this.createVertex(i,v?g.y:t),o=this.createBorderEdge(l.site,u,y),c++,h.splice(c,0,this.createHalfedge(o,l.site,null)),p++,v)break;u=y;case(this.equalWithEpsilon(u.y,t)&&this.greaterThanWithEpsilon(u.x,r)):if(v=this.equalWithEpsilon(g.y,t),y=this.createVertex(v?g.x:r,t),o=this.createBorderEdge(l.site,u,y),c++,h.splice(c,0,this.createHalfedge(o,l.site,null)),p++,v||(u=y,v=this.equalWithEpsilon(g.x,r),y=this.createVertex(r,v?g.y:s),o=this.createBorderEdge(l.site,u,y),c++,h.splice(c,0,this.createHalfedge(o,l.site,null)),p++,v)||(u=y,v=this.equalWithEpsilon(g.y,s),y=this.createVertex(v?g.x:i,s),o=this.createBorderEdge(l.site,u,y),c++,h.splice(c,0,this.createHalfedge(o,l.site,null)),p++,v)||(u=y,v=this.equalWithEpsilon(g.x,i),y=this.createVertex(i,v?g.y:t),o=this.createBorderEdge(l.site,u,y),c++,h.splice(c,0,this.createHalfedge(o,l.site,null)),p++,v))break;default:throw"Voronoi.closeCells() > this makes no sense!"}c++}l.closeMe=!1}},n.prototype.quantizeSites=function(e){for(var r=this.ε,i=e.length,t;i--;)t=e[i],t.x=Math.floor(t.x/r)*r,t.y=Math.floor(t.y/r)*r},n.prototype.recycle=function(e){if(e)if(e instanceof this.Diagram)this.toRecycle=e;else throw"Voronoi.recycleDiagram() > Need a Diagram object."},n.prototype.compute=function(e,r){var i=new Date;this.reset(),this.toRecycle&&(this.vertexJunkyard=this.vertexJunkyard.concat(this.toRecycle.vertices),this.edgeJunkyard=this.edgeJunkyard.concat(this.toRecycle.edges),this.cellJunkyard=this.cellJunkyard.concat(this.toRecycle.cells),this.toRecycle=null);var t=e.slice(0);t.sort(function(u,y){var g=y.y-u.y;return g||y.x-u.x});for(var s=t.pop(),f=0,a,l,c=this.cells,h;;)if(h=this.firstCircleEvent,s&&(!h||s.y<h.y||s.y===h.y&&s.x<h.x))(s.x!==a||s.y!==l)&&(c[f]=this.createCell(s),s.voronoiId=f++,this.addBeachsection(s),l=s.y,a=s.x),s=t.pop();else if(h)this.removeBeachsection(h.arc);else break;this.clipEdges(r),this.closeCells(r);var p=new Date,o=new this.Diagram;return o.cells=this.cells,o.edges=this.edges,o.vertices=this.vertices,o.execTime=p.getTime()-i.getTime(),this.reset(),o},b.exports=n})(T);var F=T.exports;const j=H(F);let V=[["#8ea604","#afc2d5","#ec9f05","#d76a03","#DD7804","#003844"],["#f9c80e","#f86624","#ea3546","#662e9b","#43bccd","#232020"],["#080708","#3772ff","#df2935","#3ef071","#fdca40","#e6e8e6"]],w,d={numSites:70,width:500,height:500,repelThreshold:300,constAttract:3,constRepel:8,startEdge:.4,attractMaxDist:250,repelMinDist:1,repelMaxDist:200,dragMult:.995,maxVel:.2,showParticles:!1};const M=new j;let k={xl:d.width*-.1,xr:d.width*1.1,yb:d.height*1.1,yt:d.height*-.1},P=[],C,B,z=0;class S extends W{constructor(e,r,i){super(e,r,i);I(this,"color");this.color=""}}const O=()=>{d.width=Math.min(window.innerWidth*.9,800),d.height=Math.min(window.innerHeight*.9,800),k={xl:d.width*-.1,xr:d.width*1.1,yb:d.height*1.1,yt:d.height*-.1}};function _(){let n=new D.Pane().addFolder({title:"settings"});n.addInput(d,"repelThreshold",{min:1,max:500,step:1}),n.addInput(d,"constAttract",{min:0,max:10,step:.5}),n.addInput(d,"constRepel",{min:0,max:29,step:.5}),n.addInput(d,"attractMaxDist",{min:1,max:800,step:1}),n.addInput(d,"repelMinDist",{min:1,max:800,step:1}),n.addInput(d,"repelMaxDist",{min:1,max:800,step:1}),n.addInput(d,"dragMult",{min:0,max:1,step:.001}),n.addInput(d,"maxVel",{min:0,max:1,step:.01}),n.addInput(d,"startEdge",{min:0,max:1,step:.01}),n.addInput(d,"showParticles")}const G=document.getElementById("numSites");new A(b=>{function n(){for(let t=0;t<P.length;t++)P[t].color=w[t%w.length]}function e(t){t||(t=P.length?P.length:d.numSites),P=[];for(let s=0;s<t;s++){let f=new S(b.random(d.width*d.startEdge,d.width*(1-d.startEdge)),b.random(d.height*d.startEdge,d.height*(1-d.startEdge)),{edges:{left:k.xl,right:k.xr,top:k.yt,bottom:k.yb}});f.color=w[s%w.length],P.push(f)}}b.setup=()=>{O(),b.createCanvas(d.width,d.height),w=[...b.random(V)],w=b.shuffle(w),B=w.pop()??"",e(),_()},b.draw=()=>{b.background(B),b.fill(0,100),b.noStroke();let t=P.length;G.textContent=t.toString();for(let s=0;s<t;s++){const f=P[s];for(let a=s+1;a<t;a++){const l=P[a];if(f.dist(l)<d.repelThreshold){let h=l.attract(f,{min:d.repelMinDist,max:d.repelMaxDist,G:d.constRepel});f.applyForce(h.copy().mult(-1)),l.applyForce(h)}else{let h=l.attract(f,{G:d.constAttract,max:d.attractMaxDist});f.applyForce(h),l.applyForce(h.copy().mult(-1))}f.update(),l.update()}f.checkEdges(-.9),f.velocity.mult(d.dragMult),f.velocity.limit(d.maxVel)}M.recycle(C),C=M.compute(P,k),b.frameCount===1&&console.log(C),b.noStroke(),C.cells.forEach(s=>{s.site.color&&b.fill(s.site.color),r(s)}),d.showParticles&&(b.push(),P.forEach(s=>{b.fill("#fff"),b.stroke("#000"),b.circle(s.x,s.y,5)}),b.pop()),b.mouseIsPressed&&i()};function r(t){b.push(),b.translate(t.site.x,t.site.y),b.scale(.9),b.translate(-t.site.x,-t.site.y),b.beginShape();let s=t.halfedges.length;for(let f=0;f<s;f++){const{x:a,y:l}=t.halfedges[f].getStartpoint();b.vertex(a,l)}b.endShape(b.CLOSE),b.pop()}let i=J(()=>{let{mouseX:t,mouseY:s}=b;if(t<0||t>d.width||s<0||s>d.height)return;let f=new S(t,s,{radius:10,edges:{left:k.xl,right:k.xr,top:k.yt,bottom:k.yb}});f.color=w[++z%w.length],P.push(f)},50);b.keyPressed=t=>{t.target===document.body&&(b.key===" "?(w=[...b.random(V)],w=b.shuffle(w),B=w.pop()??"",n()):parseInt(b.key)?e(parseInt(b.key)*10):b.key==="r"&&e())}},document.getElementById("sketch")??void 0);
