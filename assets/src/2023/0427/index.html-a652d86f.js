var E=Object.defineProperty;var T=(e,t,o)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var m=(e,t,o)=>(T(e,typeof t!="symbol"?t+"":t,o),o);import"../../../modulepreload-polyfill-3cfb730f.js";/* empty css                     */import{c as $}from"../../../index-8d178fc0.js";import{a as L,r as w}from"../../../utils-410b772c.js";import{l as D}from"../../../loop-9a51de3b.js";function I(e=window,{move:t=!0,overout:o=!1,drag:i}={}){let l={x:-1,y:-1};return o&&(l.over=!1),i&&(l.down=!1),t&&e.addEventListener("mousemove",a=>{let u=a;l.x=u.clientX,l.y=u.clientY,i&&l.down&&i(u)}),i&&(e.addEventListener("mousedown",()=>l.down=!0),e.addEventListener("mouseup",()=>l.down=!1)),o&&(e.addEventListener("mouseleave",()=>{l.over=!1,i&&(l.down=!1)}),e.addEventListener("mouseenter",()=>l.over=!0)),l}function R(e,t){let o=JSON.parse(window.localStorage.getItem("locparams")??"{}");Object.keys(e).forEach(u=>{e[u]=o[u]??e[u]});const l=()=>{t.fillStyle="#fff",t.font="12px monospace",t.textAlign="left",t.fillText(`bubblesMult   (x, z): ${e.bubblesMult}`,10,20),t.fillText(`mouseMass     (n, m): ${e.mouseMass}`,10,40),t.fillText(`mouseDiffMult (v, b): ${e.mouseDiffMult}`,10,60),t.fillText(`viscosity     (g, h): ${e.viscosity}`,10,80),t.fillText(`bubbleRadius  (w, e): ${e.bubbleRadius}`,10,100),t.fillText(`mouseRadius   (r, t): ${e.mouseRadius}`,10,120)};function a(u,c,y=2){e[u]=L(e[u]+c,y)}return window.addEventListener("keypress",u=>{switch(u.key){case"x":a("bubblesMult",-.05);break;case"z":a("bubblesMult",.05);break;case"n":a("mouseMass",-1,1);break;case"m":a("mouseMass",1,1);break;case"b":a("mouseDiffMult",.05);break;case"v":a("mouseDiffMult",-.05);break;case"g":a("viscosity",-.001,3);break;case"h":a("viscosity",.001,3);break;case"w":a("bubbleRadius",-1,1);break;case"e":a("bubbleRadius",1,1);break;case"r":a("mouseRadius",-1,1);break;case"t":a("mouseRadius",1,1);break}window.localStorage.setItem("locparams",JSON.stringify(e))}),l}const h=window.innerWidth,v=window.innerHeight;let s=[];const n={mmin:1.5,mmax:4,mouseRadius:125,bubbleRadius:190,bubblesMult:.15,mouseMass:130,mouseDiffMult:1.2,mouseMult:1,viscosity:.999,finalMult:5e-4};let{ctx:r,canvas:M}=$(h,v),N=R(n,r);class x{constructor(t,o){m(this,"x");m(this,"y");this.x=t,this.y=o}}class X extends x{constructor({x:o=0,y:i=0,mass:l,prev:a,next:u}){super(o,i);m(this,"next",null);m(this,"prev",null);m(this,"mass");m(this,"vel",new x(0,0));m(this,"accel",new x(0,0));a&&(this.prev=a),u&&(this.next=u),this.mass=l||1}remove(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev)}draw(){r.beginPath(),k(this.x,this.y,this.mass*7.5),r.fill()}}function k(e,t,o){r.arc(e,t,o,0,Math.PI*2)}let f=I(M,{overout:!0,move:!0,drag:g});function Y(e,t,o){if(!t||!o)return[0,0];let i=t-e.x,l=o-e.y,a=Math.max(Math.sqrt(i*i+l*l),n.mouseRadius*.5),u=Math.atan2(l,i),c=Math.atan2(e.vel.y,e.vel.x),y=u-c,b=Math.max(Math.abs(y),1);b>Math.PI&&(b=Math.PI*2-b),b/=Math.PI;let d=(a-n.mouseRadius)*n.mouseMass*e.mass/(a*a);return d+=d*n.mouseDiffMult*b,r.fillStyle=`rgba(50, ${255*b}, ${100+155*(1-b)}, 0.8)`,d*=n.mouseMult,[d*i,d*l]}const p=(e,t)=>new X({x:e,y:t,mass:w(n.mmin,n.mmax)});for(let e=0;e<10;e++)s.push(p(w(h),w(v)));function j(){r.clearRect(0,0,h,v),r.fillStyle="#1a1a1a",r.fillRect(0,0,h,v),r.fillStyle="rgba(0, 255, 191, 0.824)",f.over||(f.x=h/2,f.y=v/2);for(let e=0;e<s.length;e++){for(let i=e+1;i<s.length;i++){if(e===i)continue;let l=s[i].x-s[e].x,a=s[i].y-s[e].y,u=Math.max(Math.sqrt(l*l+a*a),1),c=(u-n.bubbleRadius)*s[i].mass*s[e].mass;c/=u*(u*1.5),c*=n.bubblesMult,s[e].accel.x+=c*l,s[e].accel.y+=c*a,s[i].accel.x-=c*l,s[i].accel.y-=c*a}let[t,o]=Y(s[e],f.x,f.y);s[e].accel.x+=t,s[e].accel.y+=o,s[e].vel.x=s[e].vel.x*n.viscosity+s[e].accel.x*n.finalMult,s[e].vel.y=s[e].vel.y*n.viscosity+s[e].accel.y*n.finalMult,s[e].x+=s[e].vel.x,s[e].y+=s[e].vel.y,s[e].accel.x=0,s[e].accel.y=0,s[e].draw()}O(),N()}function O(){r.save(),r.strokeStyle="rgba(255,255,255,0.5)",r.beginPath(),k(f.x,f.y,n.mouseRadius),r.stroke(),r.restore()}M.addEventListener("click",g);function g(){s.push(p(f.x,f.y)),s.length>100&&s.shift()}D(j);
